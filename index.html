<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Wedding Invitation</title>

<link rel="stylesheet" href="style.css">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500&family=Playfair+Display&display=swap" rel="stylesheet">
</head>

<body>

<div class="camera" id="camera">
<div class="wrapper">

<!-- ================= COVER ================= -->

<div id="coverStage" class="stage">
  <img src="cover.png" class="full-img">

  <div id="seal" class="seal-click"></div>
  <div id="sealGlow" class="seal-glow"></div>
</div>

<!-- ================= OPEN ENVELOPE ================= -->

<div id="openStage" class="stage hidden">
  <img src="card1.png" class="full-img envelope-open">
</div>

<!-- ================= LETTER CONTENT ================= -->

<div id="letterStage" class="stage hidden">

  <img src="card2.png" class="letter letter-main" id="card2">
  <img src="card3.png" class="letter">
  <img src="card4.png" class="letter">

  <!-- COUNTDOWN -->

  <div class="countdown">
    <div class="event-card">
      <div class="event-title">Majlis Bermula Dalam</div>
      <div id="timer" class="timer"></div>

      <div class="event-text">
        Glo Damansara Shopping Mall<br>
        Petaling Jaya<br><br>
        Sabtu • 2 Mei 2026 • 11:00 pagi
      </div>

      <a class="map-btn"
      href="https://maps.app.goo.gl/E8qS2P7xVHtyL8967"
      target="_blank">
      Buka Google Map
      </a>
    </div>
  </div>

  <!-- GALLERY -->

  <div class="gallery">
    <div class="gallery-grid">
      <img src="gallery1.jpg">
      <img src="gallery2.jpg">
      <img src="gallery3.jpg">
      <img src="gallery4.jpg">
    </div>

    <a class="rsvp-btn"
    href="https://forms.gle/KYxswksdS9Qqm9YC8"
    target="_blank">
    RSVP Sekarang
    </a>
  </div>

</div>

</div>
</div>

<!-- overlays -->
<div class="vignette"></div>
<div class="sparkle-layer" id="dust"></div>

<audio id="bgm" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>

/* ================= SAFE EVENT BIND ================= */

const seal = document.getElementById("seal");
seal.addEventListener("click", startOpen);
seal.addEventListener("touchstart", startOpen, {passive:true});

/* ================= OPEN SEQUENCE ================= */

function startOpen(){

  glowFlash();
  cameraZoom();
  musicFadeIn();

  document.getElementById("coverStage").classList.add("fade-out");

  setTimeout(()=>{
    document.getElementById("coverStage").classList.add("hidden");
    showOpenEnvelope();
  },600);
}

/* ================= EFFECTS ================= */

function glowFlash(){
  document.getElementById("sealGlow").classList.add("glow-on");
}

function cameraZoom(){
  document.getElementById("camera").classList.add("camera-zoom");
}

function musicFadeIn(){
  const m = document.getElementById("bgm");
  m.volume = 0;
  m.play().catch(()=>{});
  let v = 0;
  const f = setInterval(()=>{
    v += 0.05;
    m.volume = v;
    if(v>=0.6) clearInterval(f);
  },120);
}

/* ================= STAGE 2 ================= */

function showOpenEnvelope(){
  const open = document.getElementById("openStage");
  open.classList.remove("hidden");
  open.classList.add("open-zoom");

  setTimeout(showLetter, 900);
}

/* ================= STAGE 3 ================= */

function showLetter(){
  const stage = document.getElementById("letterStage");
  stage.classList.remove("hidden");
  document.getElementById("card2").classList.add("letter-out");
  spawnDust(30);
}

/* ================= COUNTDOWN ================= */

const targetDate = new Date("May 2, 2026 11:00:00").getTime();

setInterval(()=>{
  const el = document.getElementById("timer");
  if(!el) return;

  const now = Date.now();
  const diff = targetDate - now;
  if(diff<=0) return;

  const d = Math.floor(diff/(1000*60*60*24));
  const h = Math.floor((diff%(1000*60*60*24))/(1000*60*60));
  const m = Math.floor((diff%(1000*60*60))/(1000*60));
  const s = Math.floor((diff%(1000*60))/1000);

  el.innerHTML = `${d} hari ${h} jam ${m} minit ${s} saat`;

},1000);

/* ================= GOLD DUST ================= */

function spawnDust(n){
  const layer = document.getElementById("dust");
  for(let i=0;i<n;i++){
    const d=document.createElement("div");
    d.className="dust";
    d.style.left=Math.random()*100+"%";
    d.style.animationDuration=(12+Math.random()*10)+"s";
    d.style.animationDelay=Math.random()*10+"s";
    layer.appendChild(d);
  }
}

/* start base dust immediately */
spawnDust(25);

</script>

</body>
</html>
