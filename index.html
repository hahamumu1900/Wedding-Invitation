<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Walimatulurus Haziq & Naiwa</title>

<link rel="stylesheet" href="style.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
</head>

<body>

<div class="camera" id="camera">
<div class="wrapper">

<!-- ================= COVER ================= -->

<div id="coverStage" class="stage">
  <img src="cover.png" class="full-img">

  <div id="seal" class="seal-click"></div>
  <div id="sealGlow" class="seal-glow"></div>
</div>

<!-- ================= LONG SCROLL CARD ================= -->

<div id="letterStage" class="stage hidden">

  <!-- All cards stacked vertically -->
  <img src="card1.png" class="scroll-card">
  <img src="card2.png" class="scroll-card reveal">
  <img src="card3.png" class="scroll-card reveal">
  <img src="card4.png" class="scroll-card reveal">
  <img src="card5.png" class="scroll-card reveal">

  <!-- ===== COUNTDOWN ===== -->

  <div class="countdown">
    <div class="event-card">
      <div class="event-title">Majlis Bermula Dalam</div>
      <div id="timer" class="timer"></div>

      <div class="event-text">
        Glo Damansara Shopping Mall<br>
        Petaling Jaya<br><br>
        Sabtu • 2 Mei 2026 • 11:00 pagi
      </div>

      <a class="map-btn"
      href="https://maps.app.goo.gl/E8qS2P7xVHtyL8967"
      target="_blank">
      Buka Google Map
      </a>
    </div>
  </div>

  <!-- ===== GALLERY ===== -->

  <div class="gallery">
    <div class="gallery-grid">
      <img src="gallery1.jpg">
      <img src="gallery2.jpg">
      <img src="gallery3.jpg">
      <img src="gallery4.jpg">
    </div>

    <a class="rsvp-btn"
    href="https://forms.gle/KYxswksdS9Qqm9YC8"
    target="_blank">
    RSVP Sekarang
    </a>
  </div>

</div>
</div>
</div>

<div class="vignette"></div>
<div class="sparkle-layer" id="dust"></div>

<audio id="bgm" loop>
  <source src="music.mp3" type="audio/mpeg">
</audio>

<script>

/* ===== OPEN SEQUENCE ===== */

let isOpening = false;
const seal = document.getElementById("seal");

seal.onclick = startOpen;
seal.ontouchstart = startOpen;

function startOpen(){
  if(isOpening) return;
  isOpening = true;

  glowFlash();
  document.getElementById("camera").classList.add("camera-zoom");
  startMusic();

  document.getElementById("coverStage").classList.add("fade-out");

  setTimeout(()=>{
    document.getElementById("coverStage").classList.add("hidden");
    showScrollCards();
  },800);
}

function glowFlash(){
  const g = document.getElementById("sealGlow");
  g.classList.remove("glow-on");
  void g.offsetWidth;
  g.classList.add("glow-on");
}

/* ===== SHOW LONG SCROLL ===== */

function showScrollCards(){
  const stage = document.getElementById("letterStage");
  stage.classList.remove("hidden");

  const cards = document.querySelectorAll(".reveal");

  cards.forEach((card,i)=>{
    setTimeout(()=>{
      card.classList.add("reveal-show");
    }, 300 * i);
  });

  spawnDust(40);
}

/* ===== MUSIC ===== */

function startMusic(){
  const m = document.getElementById("bgm");
  m.volume = 0;
  m.play().catch(()=>{});
  let v=0;
  const f=setInterval(()=>{
    v+=0.03;
    m.volume=Math.min(v,0.6);
    if(v>=0.6) clearInterval(f);
  },100);
}

/* ===== COUNTDOWN ===== */

const targetDate = new Date("May 2, 2026 11:00:00").getTime();

function updateCountdown(){
  const el=document.getElementById("timer");
  if(!el) return;

  const diff = targetDate - Date.now();
  if(diff<=0){ el.innerHTML="Majlis Telah Bermula!"; return;}

  const d=Math.floor(diff/86400000);
  const h=Math.floor(diff%86400000/3600000);
  const m=Math.floor(diff%3600000/60000);
  const s=Math.floor(diff%60000/1000);

  el.innerHTML=`${d} hari ${h} jam ${m} minit ${s} saat`;
}
setInterval(updateCountdown,1000);
updateCountdown();

/* ===== DUST ===== */

function spawnDust(n){
  const layer=document.getElementById("dust");
  for(let i=0;i<n;i++){
    const d=document.createElement("div");
    d.className="dust";
    d.style.left=(10+Math.random()*80)+"%";
    const dur=15+Math.random()*20;
    d.style.animationDuration=dur+"s";
    layer.appendChild(d);
  }
}

</script>
</body>
</html>
